ko.common=function(win){var templateFromUrlLoader={loadTemplate:function(e,o,a){if(o.fromUrl){var n="/components/"+o.fromUrl+"?cacheAge="+o.maxCacheAge+"&v="+Date.now();$.get(n,function(o){ko.components.defaultLoader.loadTemplate(e,o,a)})}else a(null)}};ko.components.loaders.unshift(templateFromUrlLoader);var viewModelCustomLoader={loadViewModel:function(name,viewModelConfig,callback){if(viewModelConfig.viaLoader){var fullUrl="/components/"+viewModelConfig.viaLoader+"?v="+Date.now();$.get(fullUrl,function(funcString){eval(funcString);var viaLoader="";if(viewModelConfig.viaLoader){var params=viewModelConfig.viaLoader.split("/");params.length>0&&(viaLoader=params[params.length-1],viaLoader=viaLoader.substring(0,viaLoader.indexOf(".")),viaLoader=viaLoader.charAt(0).toUpperCase()+viaLoader.slice(1))}ko.components.defaultLoader.loadViewModel(name,window[viaLoader],callback)})}else callback(null)}};return ko.components.loaders.unshift(viewModelCustomLoader),{postbox:function(){var e=new ko.subscribable;return{subscribe:function(o,a){e.subscribe(o,null,a)},publish:function(o,a){e.notifySubscribers(o,a)}}}(),initComps:function(jsString){eval(jsString)},removeKnockoutBindings:function(e){$(e).find("[data-bind]").each(function(){$(this).unbind(),ko.cleanNode($(this))})},generateJS:function(e){var o="";return e&&(e.list.forEach(function(e){e.html_template=e.html_template+"?v="+Date.now(),e.model_template=e.model_template+"?v="+Date.now(),o+="ko.components.unregister('"+e.model_code+"');",o+="ko.components.register('"+e.model_code+"', {template: { fromUrl: '"+e.html_template+"', maxCacheAge: 0 },viewModel: { viaLoader : '"+e.model_template+"'}});"}),o+="ko.applyBindings();"),o}}}(window);